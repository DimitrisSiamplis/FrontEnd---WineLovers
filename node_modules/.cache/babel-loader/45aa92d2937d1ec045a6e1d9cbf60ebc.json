{"ast":null,"code":"import _slicedToArray from\"C:/Users/dimitris.siamplis/Desktop/React-Node/Front-End/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from\"react\";import\"./Blog.css\";import{Button,OverlayTrigger,Popover}from\"react-bootstrap\";import{useState,useEffect}from\"react\";import Cookies from\"universal-cookie\";import{dateFormater,getAge}from\"./Functions/functions\";import{FontAwesomeIcon}from\"@fortawesome/react-fontawesome\";import{faReply}from\"@fortawesome/free-solid-svg-icons\";import{Container,Row,Col,Form,Modal,Alert,PageItem}from\"react-bootstrap\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Blog=function Blog(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),initialBlogs=_useState2[0],setInitialBlogs=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),blogs=_useState4[0],setBlogs=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),user=_useState6[0],setUser=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),question=_useState8[0],setQuestion=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),userName=_useState10[0],setUserName=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),userId=_useState12[0],setUserId=_useState12[1];// --------------- Filter Hooks ------------------\nvar _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),blogSearch=_useState14[0],setBlogSearch=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),topReviewSearch=_useState16[0],setTopReviewSearch=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),myQuestion=_useState18[0],setMyQuestion=_useState18[1];var cookies=new Cookies();var userEmail=cookies.get(\"email\");// --------- get All Blogs ----------------\nvar getBlogs=function getBlogs(){fetch(\"http://localhost:4000/getBlogs\").then(function(res){return res.json();}).then(function(json){console.log([json]);setBlogs([json]);setInitialBlogs([json]);});};useEffect(function(){getBlogs();getUser(userEmail);},[]);var getUser=function getUser(email){setUser([]);fetch(\"http://localhost:4000/getUser/\".concat(email)).then(function(res){return res.json();}).then(function(json){console.log(json);setUser([json]);setUserName(json.user.Name);setUserId(json.user._id);});};var popover=/*#__PURE__*/_jsx(Popover,{id:\"popover-basic\",children:user.length!==0&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Popover.Header,{as:\"h3\",children:user[0].user.Name}),/*#__PURE__*/_jsxs(Popover.Body,{children:[\"Email : \",/*#__PURE__*/_jsx(\"strong\",{children:user[0].user.Email}),\" \",/*#__PURE__*/_jsx(\"br\",{}),\"Tel. : \",/*#__PURE__*/_jsx(\"strong\",{children:user[0].user.Mobile}),\" \",/*#__PURE__*/_jsx(\"br\",{}),\"Address : \",/*#__PURE__*/_jsx(\"strong\",{children:user[0].user.Address}),\" \",/*#__PURE__*/_jsx(\"br\",{}),\"Age : \",/*#__PURE__*/_jsx(\"strong\",{children:getAge(new Date(user[0].user.Birthday))}),\" \",/*#__PURE__*/_jsx(\"br\",{})]})]})});var onCreateQuestion=function onCreateQuestion(){console.log(question,userEmail,userId,userName);var blogDetails={email:userEmail,id:userId,Name:userName,question:question};fetch(\"http://localhost:4000/createQuestion\",{method:\"POST\",body:JSON.stringify(blogDetails),headers:{\"Content-Type\":\"application/json\"}}).then(function(res){return res.json();}).then(function(json){console.log(json);setQuestion(\"\");getBlogs();});};var filterQuestion=function filterQuestion(){var oldBlogs=initialBlogs;var newBlogArray=[];var newArray=oldBlogs[0].numberOfApplies.filter(function(el){return el.blogs.Question.includes(blogSearch);});if(myQuestion){newArray=newArray.filter(function(el){return el.blogs.UserEmail.includes(userEmail);});}if(topReviewSearch){newArray.sort(function(a,b){return b.numberOfApplies-a.numberOfApplies;});}console.log(newArray);newBlogArray.push({numberOfApplies:newArray});setBlogs(newBlogArray);window.scrollTo(0,0);};var onClearHandler=function onClearHandler(){setMyQuestion(false);setTopReviewSearch(false);setBlogSearch(\"\");setBlogs(initialBlogs);window.scrollTo(0,0);};return/*#__PURE__*/_jsxs(\"div\",{className:\"blogAndFilter\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"applieToQuestionFilters\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Search\\xA0for\\xA0comments\"}),/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsxs(Form,{children:[/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"formBasicEmail\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Filter Blogs\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"Filter Blog\",value:blogSearch,onChange:function onChange(e){setBlogSearch(e.target.value);}})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"rateCheckBox\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:topReviewSearch,onChange:function onChange(e){setTopReviewSearch(e.target.checked);}}),/*#__PURE__*/_jsx(\"label\",{className:\"rateLabel\",children:\"\\xA0Search\\xA0by\\xA0top\\xA0question.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"rateCheckBox\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:myQuestion,onChange:function onChange(e){setMyQuestion(e.target.checked);}}),/*#__PURE__*/_jsx(\"label\",{className:\"rateLabel\",children:\"\\xA0My\\xA0questions.\"})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{xs:4,children:/*#__PURE__*/_jsx(Button,{variant:\"warning\",onClick:onClearHandler,children:\"Clear\"})}),/*#__PURE__*/_jsx(Col,{xs:6,children:/*#__PURE__*/_jsx(Button,{variant:\"success\",onClick:filterQuestion,children:\"Search\"})})]}),\"\\xA0\"]})})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"container py-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-md-10 col-lg-8 m-auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-3 shadow-sm p-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"mb-4\",children:\"Leave a Question\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"rounded-circle me-3\",src:\"https://via.placeholder.com/128/{{this.randomColor}}/ffcbde.png?text={{this.StaringName}}\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-grow-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"hstack gap-2 mb-1\",children:/*#__PURE__*/_jsx(\"a\",{href:\"#\",className:\"fw-bold link-dark\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-floating mb-3\",children:[/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control w-100\",value:question,onChange:function onChange(e){setQuestion(e.target.value);},required:true}),/*#__PURE__*/_jsx(\"label\",{children:\"Leave a message here\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"hstack justify-content-end gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-link link-secondary text-uppercase\",title:\"Clear form\",onClick:function onClick(){setQuestion(\"\");},children:\"Clear\"}),/*#__PURE__*/_jsx(\"button\",{disabled:question.trim()===\"\",className:\"btn btn-sm btn-primary text-uppercase\",onClick:onCreateQuestion,children:\"comment\"})]})]})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"h4\",{className:\"mb-4\",children:\"Questions\"}),/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"py-3\",children:[blogs.length!==0&&/*#__PURE__*/_jsx(\"div\",{className:\"table-wrapper\",children:blogs[0].numberOfApplies.map(function(blog){return/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex comment\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"rounded-circle me-3\",src:\"https://via.placeholder.com/130/\".concat(Math.floor(Math.random()*16777215).toString(16),\"/ffcbde.png?text=\").concat(blog.blogs.UserName.split(\" \")[0][0]+blog.blogs.UserName.split(\" \")[1][0])}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-grow-1 ms-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-1\",children:[/*#__PURE__*/_jsx(OverlayTrigger,{trigger:user.length===0?\"click\":\"focus\",placement:\"right\",overlay:popover,children:/*#__PURE__*/_jsx(Button,{onClick:function onClick(){getUser(blog.blogs.UserEmail);},className:\"popoverButton\",children:blog.blogs.UserName})}),/*#__PURE__*/_jsx(FontAwesomeIcon,{className:\"eyeFaIcon\",title:\"Reply to \".concat(blog.blogs.UserName),onClick:function onClick(){window.open(\"/blogInfo/\".concat(blog.blogs._id));},icon:faReply,size:\"lg\"}),\" \",/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsx(\"span\",{className:\"text-muted text-nowrap\",children:dateFormater(new Date(blog.blogs.QuestionDate))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-2 css\",children:blog.blogs.Question}),/*#__PURE__*/_jsxs(\"div\",{className:\"hstack align-items-center mb-2\",children:[/*#__PURE__*/_jsx(\"a\",{className:\"link-primary me-2\",href:\"#\",children:/*#__PURE__*/_jsx(\"i\",{className:\"zmdi zmdi-thumb-up\"})}),/*#__PURE__*/_jsxs(\"span\",{className:\"me-3 small\",children:[/*#__PURE__*/_jsx(\"strong\",{children:blog.numberOfApplies}),\" aplies.\"]}),/*#__PURE__*/_jsx(\"a\",{className:\"link-secondary me-4\",href:\"#\",children:/*#__PURE__*/_jsx(\"i\",{className:\"zmdi zmdi-thumb-down\"})}),blog.blogs.UserEmail===userEmail&&/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger\",title:\"Delete Question!\",children:\"Delete\"}),/*#__PURE__*/_jsx(\"div\",{className:\"modal fade\",id:\"exampleModal\",role:\"dialog\",\"aria-labelledby\":\"exampleModalLabel\",\"aria-hidden\":\"true\",children:/*#__PURE__*/_jsx(\"div\",{className:\"modal-dialog\",role:\"document\",children:/*#__PURE__*/_jsx(\"div\",{className:\"modal-content\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"modal-title\",id:\"exampleModalLabel\",children:\"Modal title\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"close\",\"data-dismiss\":\"modal\",\"aria-label\":\"Close\",children:/*#__PURE__*/_jsx(\"span\",{\"aria-hidden\":\"true\",children:\"\\xD7\"})})]})})})})]}),/*#__PURE__*/_jsx(\"a\",{className:\"fw-bold d-flex align-items-center\",href:\"#\",children:/*#__PURE__*/_jsx(\"i\",{className:\"zmdi zmdi-chevron-down fs-4 me-3\"})})]})]});})}),/*#__PURE__*/_jsx(\"br\",{})]})})]})})})]});};export default Blog;","map":{"version":3,"sources":["C:/Users/dimitris.siamplis/Desktop/React-Node/Front-End/src/pages/Blog.js"],"names":["React","Button","OverlayTrigger","Popover","useState","useEffect","Cookies","dateFormater","getAge","FontAwesomeIcon","faReply","Container","Row","Col","Form","Modal","Alert","PageItem","Blog","initialBlogs","setInitialBlogs","blogs","setBlogs","user","setUser","question","setQuestion","userName","setUserName","userId","setUserId","blogSearch","setBlogSearch","topReviewSearch","setTopReviewSearch","myQuestion","setMyQuestion","cookies","userEmail","get","getBlogs","fetch","then","res","json","console","log","getUser","email","Name","_id","popover","length","Email","Mobile","Address","Date","Birthday","onCreateQuestion","blogDetails","id","method","body","JSON","stringify","headers","filterQuestion","oldBlogs","newBlogArray","newArray","numberOfApplies","filter","el","Question","includes","UserEmail","sort","a","b","push","window","scrollTo","onClearHandler","e","target","value","checked","trim","map","blog","Math","floor","random","toString","UserName","split","open","QuestionDate"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport \"./Blog.css\";\r\nimport { Button, OverlayTrigger, Popover } from \"react-bootstrap\";\r\nimport { useState, useEffect } from \"react\";\r\nimport Cookies from \"universal-cookie\";\r\nimport { dateFormater, getAge } from \"./Functions/functions\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faReply } from \"@fortawesome/free-solid-svg-icons\";\r\nimport {\r\n  Container,\r\n  Row,\r\n  Col,\r\n  Form,\r\n  Modal,\r\n  Alert,\r\n  PageItem,\r\n} from \"react-bootstrap\";\r\n\r\nconst Blog = () => {\r\n  const [initialBlogs, setInitialBlogs] = useState([]);\r\n  const [blogs, setBlogs] = useState([]);\r\n  const [user, setUser] = useState([]);\r\n  const [question, setQuestion] = useState(\"\");\r\n  const [userName, setUserName] = useState(\"\");\r\n  const [userId, setUserId] = useState(\"\");\r\n\r\n  // --------------- Filter Hooks ------------------\r\n  const [blogSearch, setBlogSearch] = useState(\"\");\r\n  const [topReviewSearch, setTopReviewSearch] = useState(false);\r\n  const [myQuestion, setMyQuestion] = useState(false);\r\n\r\n  const cookies = new Cookies();\r\n  var userEmail = cookies.get(\"email\");\r\n\r\n  // --------- get All Blogs ----------------\r\n  const getBlogs = () => {\r\n    fetch(`http://localhost:4000/getBlogs`)\r\n      .then((res) => res.json())\r\n      .then((json) => {\r\n        console.log([json]);\r\n        setBlogs([json]);\r\n        setInitialBlogs([json]);\r\n      });\r\n  };\r\n\r\n  useEffect(() => {\r\n    getBlogs();\r\n    getUser(userEmail);\r\n  }, []);\r\n\r\n  const getUser = (email) => {\r\n    setUser([]);\r\n    fetch(`http://localhost:4000/getUser/${email}`)\r\n      .then((res) => res.json())\r\n      .then((json) => {\r\n        console.log(json);\r\n        setUser([json]);\r\n        setUserName(json.user.Name);\r\n        setUserId(json.user._id);\r\n      });\r\n  };\r\n\r\n  const popover = (\r\n    <Popover id=\"popover-basic\">\r\n      {user.length !== 0 && (\r\n        <div>\r\n          <Popover.Header as=\"h3\">{user[0].user.Name}</Popover.Header>\r\n          <Popover.Body>\r\n            Email : <strong>{user[0].user.Email}</strong> <br />\r\n            Tel. : <strong>{user[0].user.Mobile}</strong> <br />\r\n            Address : <strong>{user[0].user.Address}</strong> <br />\r\n            Age : <strong>\r\n              {getAge(new Date(user[0].user.Birthday))}\r\n            </strong>{\" \"}\r\n            <br />\r\n          </Popover.Body>\r\n        </div>\r\n      )}\r\n    </Popover>\r\n  );\r\n\r\n  const onCreateQuestion = () => {\r\n    console.log(question, userEmail, userId, userName);\r\n\r\n    let blogDetails = {\r\n      email: userEmail,\r\n      id: userId,\r\n      Name: userName,\r\n      question: question,\r\n    };\r\n    fetch(\"http://localhost:4000/createQuestion\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify(blogDetails),\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n    })\r\n      .then((res) => res.json())\r\n      .then((json) => {\r\n        console.log(json);\r\n        setQuestion(\"\");\r\n        getBlogs();\r\n      });\r\n  };\r\n\r\n  const filterQuestion = () => {\r\n    var oldBlogs = initialBlogs;\r\n    var newBlogArray = [];\r\n    var newArray = oldBlogs[0].numberOfApplies.filter(function (el) {\r\n      return el.blogs.Question.includes(blogSearch);\r\n    });\r\n\r\n    if (myQuestion) {\r\n      newArray = newArray.filter(function (el) {\r\n        return el.blogs.UserEmail.includes(userEmail);\r\n      });\r\n    }\r\n\r\n    if (topReviewSearch) {\r\n      newArray.sort((a, b) => {\r\n        return b.numberOfApplies - a.numberOfApplies;\r\n      });\r\n    }\r\n    console.log(newArray);\r\n\r\n    newBlogArray.push({ numberOfApplies: newArray });\r\n    setBlogs(newBlogArray);\r\n    window.scrollTo(0, 0);\r\n  };\r\n\r\n  const onClearHandler = () => {\r\n    setMyQuestion(false);\r\n    setTopReviewSearch(false);\r\n    setBlogSearch(\"\");\r\n    setBlogs(initialBlogs);\r\n    window.scrollTo(0, 0);\r\n  };\r\n\r\n  return (\r\n    <div className=\"blogAndFilter\">\r\n      <div className=\"applieToQuestionFilters\">\r\n        <h4>Search&nbsp;for&nbsp;comments</h4>\r\n\r\n        <Container>\r\n          <Row>\r\n            <Form>\r\n              <Form.Group className=\"mb-3\" controlId=\"formBasicEmail\">\r\n                <Form.Label>Filter Blogs</Form.Label>\r\n                <Form.Control\r\n                  type=\"text\"\r\n                  placeholder=\"Filter Blog\"\r\n                  value={blogSearch}\r\n                  onChange={(e) => {\r\n                    setBlogSearch(e.target.value);\r\n                  }}\r\n                />\r\n              </Form.Group>\r\n              <br />\r\n              <div className=\"rateCheckBox\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  checked={topReviewSearch}\r\n                  onChange={(e) => {\r\n                    setTopReviewSearch(e.target.checked);\r\n                  }}\r\n                />\r\n                <label className=\"rateLabel\">\r\n                  &nbsp;Search&nbsp;by&nbsp;top&nbsp;question.\r\n                </label>\r\n              </div>\r\n              <div className=\"rateCheckBox\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  checked={myQuestion}\r\n                  onChange={(e) => {\r\n                    setMyQuestion(e.target.checked);\r\n                  }}\r\n                />\r\n                <label className=\"rateLabel\">&nbsp;My&nbsp;questions.</label>\r\n              </div>\r\n              <br />\r\n              \r\n              <hr />\r\n              <Row>\r\n                <Col xs={4}>\r\n                  <Button variant=\"warning\" onClick={onClearHandler}>\r\n                    Clear\r\n                  </Button>\r\n                </Col>\r\n                <Col xs={6}>\r\n                  <Button variant=\"success\" onClick={filterQuestion}>\r\n                    Search\r\n                  </Button>\r\n                </Col>\r\n              </Row>\r\n              &nbsp;\r\n            </Form>\r\n          </Row>\r\n        </Container>\r\n      </div>\r\n      <div className=\"container py-4\">\r\n        <div className=\"col-md-10 col-lg-8 m-auto\">\r\n          <div className=\"bg-white rounded-3 shadow-sm p-4\">\r\n            <h4 className=\"mb-4\">Leave a Question</h4>\r\n\r\n            {/* <div className=\"alert alert-danger\" role=\"alert\"></div> */}\r\n\r\n            <div className=\"d-flex\">\r\n              <img\r\n                className=\"rounded-circle me-3\"\r\n                src=\"https://via.placeholder.com/128/{{this.randomColor}}/ffcbde.png?text={{this.StaringName}}\"\r\n              />\r\n              <div className=\"flex-grow-1\">\r\n                <div className=\"hstack gap-2 mb-1\">\r\n                  <a href=\"#\" className=\"fw-bold link-dark\"></a>\r\n                </div>\r\n                <div className=\"form-floating mb-3\">\r\n                  <textarea\r\n                    className=\"form-control w-100\"\r\n                    value={question}\r\n                    onChange={(e) => {\r\n                      setQuestion(e.target.value);\r\n                    }}\r\n                    required\r\n                  ></textarea>\r\n                  <label>Leave a message here</label>\r\n                </div>\r\n\r\n                <div className=\"hstack justify-content-end gap-2\">\r\n                  <button\r\n                    className=\"btn btn-sm btn-link link-secondary text-uppercase\"\r\n                    title=\"Clear form\"\r\n                    onClick={() => {\r\n                      setQuestion(\"\");\r\n                    }}\r\n                  >\r\n                    Clear\r\n                  </button>\r\n                  <button\r\n                    disabled={question.trim() === \"\"}\r\n                    className=\"btn btn-sm btn-primary text-uppercase\"\r\n                    onClick={onCreateQuestion}\r\n                  >\r\n                    comment\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <br />\r\n            <hr />\r\n            <h4 className=\"mb-4\">Questions</h4>\r\n\r\n            <div></div>\r\n            <br />\r\n            <br />\r\n            <hr />\r\n\r\n            <div className=\"\">\r\n              <div className=\"py-3\">\r\n                {blogs.length !== 0 && (\r\n                  <div className=\"table-wrapper\">\r\n                    {blogs[0].numberOfApplies.map((blog) => (\r\n                      <div className=\"d-flex comment\">\r\n                        <img\r\n                          className=\"rounded-circle me-3\"\r\n                          src={`https://via.placeholder.com/130/${Math.floor(\r\n                            Math.random() * 16777215\r\n                          ).toString(16)}/ffcbde.png?text=${\r\n                            blog.blogs.UserName.split(\" \")[0][0] +\r\n                            blog.blogs.UserName.split(\" \")[1][0]\r\n                          }`}\r\n                        />\r\n                        <div className=\"flex-grow-1 ms-3\">\r\n                          <div className=\"mb-1\">\r\n                            <OverlayTrigger\r\n                              trigger={user.length === 0 ? \"click\" : \"focus\"}\r\n                              placement=\"right\"\r\n                              overlay={popover}\r\n                            >\r\n                              <Button\r\n                                onClick={() => {\r\n                                  getUser(blog.blogs.UserEmail);\r\n                                }}\r\n                                className=\"popoverButton\"\r\n                              >\r\n                                {blog.blogs.UserName}\r\n                              </Button>\r\n                            </OverlayTrigger>\r\n                            <FontAwesomeIcon\r\n                              className=\"eyeFaIcon\"\r\n                              title={`Reply to ${blog.blogs.UserName}`}\r\n                              onClick={() => {\r\n                                window.open(`/blogInfo/${blog.blogs._id}`);\r\n                              }}\r\n                              icon={faReply}\r\n                              size=\"lg\"\r\n                            />{\" \"}\r\n                            <br />{\" \"}\r\n                            <span className=\"text-muted text-nowrap\">\r\n                              {dateFormater(new Date(blog.blogs.QuestionDate))}\r\n                            </span>\r\n                          </div>\r\n\r\n                          <div className=\"mb-2 css\">{blog.blogs.Question}</div>\r\n                          <div className=\"hstack align-items-center mb-2\">\r\n                            <a className=\"link-primary me-2\" href=\"#\">\r\n                              <i className=\"zmdi zmdi-thumb-up\"></i>\r\n                            </a>\r\n                            <span className=\"me-3 small\">\r\n                              <strong>{blog.numberOfApplies}</strong> aplies.\r\n                            </span>\r\n                            <a className=\"link-secondary me-4\" href=\"#\">\r\n                              <i className=\"zmdi zmdi-thumb-down\"></i>\r\n                            </a>\r\n\r\n                            {blog.blogs.UserEmail === userEmail && (\r\n                              <button\r\n                                className=\"btn btn-danger\"\r\n                                title=\"Delete Question!\"\r\n                              >\r\n                                Delete\r\n                              </button>\r\n                            )}\r\n\r\n                            <div\r\n                              className=\"modal fade\"\r\n                              id=\"exampleModal\"\r\n                              role=\"dialog\"\r\n                              aria-labelledby=\"exampleModalLabel\"\r\n                              aria-hidden=\"true\"\r\n                            >\r\n                              <div className=\"modal-dialog\" role=\"document\">\r\n                                <div className=\"modal-content\">\r\n                                  <div className=\"modal-header\">\r\n                                    <h5\r\n                                      className=\"modal-title\"\r\n                                      id=\"exampleModalLabel\"\r\n                                    >\r\n                                      Modal title\r\n                                    </h5>\r\n                                    <button\r\n                                      type=\"button\"\r\n                                      className=\"close\"\r\n                                      data-dismiss=\"modal\"\r\n                                      aria-label=\"Close\"\r\n                                    >\r\n                                      <span aria-hidden=\"true\">&times;</span>\r\n                                    </button>\r\n                                  </div>\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                          <a\r\n                            className=\"fw-bold d-flex align-items-center\"\r\n                            href=\"#\"\r\n                          >\r\n                            <i className=\"zmdi zmdi-chevron-down fs-4 me-3\"></i>\r\n                          </a>\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n\r\n                <br />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Blog;\r\n"]},"metadata":{},"sourceType":"module"}