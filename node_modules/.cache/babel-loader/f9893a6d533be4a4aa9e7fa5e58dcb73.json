{"ast":null,"code":"import _slicedToArray from\"C:/Users/dimitris.siamplis/Desktop/React-Node/Front-End/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from\"react\";import\"./History.css\";import\"./Card.css\";import{useState,useEffect}from\"react\";import Cookies from\"universal-cookie\";import{BiDetail}from\"react-icons/bi\";import{dateFormater,addDays}from\"./Functions/functions\";import{Table,Row,Col,Modal,Button,Badge}from\"react-bootstrap\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var History=function History(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),history=_useState2[0],setHistory=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),orderSelected=_useState4[0],setOrderSelected=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),show=_useState6[0],setShow=_useState6[1];var handleClose=function handleClose(){return setShow(false);};var handleShow=function handleShow(){return setShow(true);};var getHistory=function getHistory(){fetch(\"http://localhost:4000/getHistory\").then(function(res){return res.json();}).then(function(json){console.log(json);setHistory(json);});};useEffect(function(){getHistory();},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Modal,{show:show,onHide:handleClose,size:\"lg\",children:[/*#__PURE__*/_jsx(Modal.Body,{children:orderSelected.length!==0&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsxs(Col,{children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Order Details\"}),/*#__PURE__*/_jsx(\"br\",{})]})}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{xs:6,children:[\"Order Id : \",/*#__PURE__*/_jsx(\"strong\",{children:orderSelected[0]._id})]}),/*#__PURE__*/_jsxs(Col,{xs:6,children:[\"Order Date :\",\" \",/*#__PURE__*/_jsx(\"strong\",{children:orderSelected[0].OrderDate.slice(0,10)})]})]}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{xs:6,children:/*#__PURE__*/_jsx(\"hr\",{})}),/*#__PURE__*/_jsx(Col,{xs:6,children:/*#__PURE__*/_jsx(\"hr\",{})})]}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{xs:6,children:[\"Total Price : \",/*#__PURE__*/_jsxs(\"strong\",{children:[orderSelected[0].Price,\" \\u20AC\"]})]}),/*#__PURE__*/_jsxs(Col,{xs:6,children:[\"Shipping Date :\",\" \",/*#__PURE__*/_jsx(\"strong\",{children:orderSelected[0].OrderDate.slice(0,10)})]})]}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{xs:6,children:/*#__PURE__*/_jsx(\"hr\",{})}),/*#__PURE__*/_jsx(Col,{xs:6,children:/*#__PURE__*/_jsx(\"hr\",{})})]}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{xs:6,children:[\"Order Send status\",\" \",/*#__PURE__*/_jsxs(Badge,{pill:true,bg:orderSelected[0].HasBeenSend?\"success\":\"danger\",children:[orderSelected[0].HasBeenSend?\"Pending...\":\"On Storage\",\"\\xA0\"]})]}),/*#__PURE__*/_jsxs(Col,{xs:6,children:[\"Order Delivered  status\",\" \",/*#__PURE__*/_jsxs(Badge,{pill:true,bg:orderSelected[0].HasBeenDelivered?\"success\":\"danger\",children:[orderSelected[0].HasBeenDelivered?\"Delivered\":\"No Delivered\",\"\\xA0\"]})]})]})]})}),/*#__PURE__*/_jsxs(Modal.Footer,{children:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:handleClose,children:\"Close\"}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:handleClose,children:\"Create Order Again\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"title\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"container py-4\",children:[/*#__PURE__*/_jsx(\"header\",{class:\"pb-3 mb-4 border-bottom\",children:/*#__PURE__*/_jsx(\"a\",{class:\"d-flex align-items-center text-dark text-decoration-none\",children:/*#__PURE__*/_jsx(\"span\",{class:\"fs-4\",children:\"WineLovers Website - Previous Order\"})})}),\" \"]}),history.length!==0&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{md:{span:6,offset:3},children:/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,size:\"sm\",className:\"personal-details-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"th\",{children:\"Order Details\"})})}),/*#__PURE__*/_jsx(\"tbody\",{children:history.map(function(historyy){return/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{xs:4,children:[\"Date:\",\" \",/*#__PURE__*/_jsx(\"strong\",{children:historyy.OrderDate.slice(0,10)})]}),/*#__PURE__*/_jsx(Col,{md:{span:1,offset:6},children:/*#__PURE__*/_jsx(\"h4\",{children:/*#__PURE__*/_jsx(BiDetail,{title:\"Order Details\",className:\"order-details-icon\",onClick:function onClick(){handleShow();for(var key in history){if(history[key]._id===historyy._id){console.log(history[key]);setOrderSelected([history[key]]);}}}})})})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{xs:8,children:historyy.Wines.map(function(wine){return/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u2022 \",wine.wine.WineName]});})})})]})});})})]})})})})]})]});};export default History;","map":{"version":3,"sources":["C:/Users/dimitris.siamplis/Desktop/React-Node/Front-End/src/pages/History.js"],"names":["React","useState","useEffect","Cookies","BiDetail","dateFormater","addDays","Table","Row","Col","Modal","Button","Badge","History","history","setHistory","orderSelected","setOrderSelected","show","setShow","handleClose","handleShow","getHistory","fetch","then","res","json","console","log","length","_id","OrderDate","slice","Price","HasBeenSend","HasBeenDelivered","span","offset","map","historyy","key","Wines","wine","WineName"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport \"./History.css\";\r\nimport \"./Card.css\";\r\nimport { useState, useEffect } from \"react\";\r\nimport Cookies from \"universal-cookie\";\r\nimport { BiDetail } from \"react-icons/bi\";\r\nimport { dateFormater, addDays } from \"./Functions/functions\";\r\nimport { Table, Row, Col, Modal, Button, Badge } from \"react-bootstrap\";\r\n\r\nconst History = () => {\r\n  const [history, setHistory] = useState([]);\r\n  const [orderSelected, setOrderSelected] = useState([]);\r\n  const [show, setShow] = useState(false);\r\n  const handleClose = () => setShow(false);\r\n  const handleShow = () => setShow(true);\r\n\r\n  const getHistory = () => {\r\n    fetch(\"http://localhost:4000/getHistory\")\r\n      .then((res) => res.json())\r\n      .then((json) => {\r\n        console.log(json);\r\n        setHistory(json);\r\n      });\r\n  };\r\n\r\n  useEffect(() => {\r\n    getHistory();\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      <Modal show={show} onHide={handleClose} size=\"lg\">\r\n        <Modal.Body>\r\n          {orderSelected.length !== 0 && (\r\n            <>\r\n              <Row>\r\n                <Col>\r\n                  <h4>Order Details</h4>\r\n                  <br />\r\n                </Col>\r\n              </Row>\r\n              <Row>\r\n                <Col xs={6}>\r\n                  Order Id : <strong>{orderSelected[0]._id}</strong>\r\n                </Col>\r\n                <Col xs={6}>\r\n                  Order Date :{\" \"}\r\n                  <strong>{orderSelected[0].OrderDate.slice(0, 10)}</strong>\r\n                </Col>\r\n              </Row>\r\n              <Row>\r\n                <Col xs={6}>\r\n                  <hr />\r\n                </Col>\r\n                <Col xs={6}>\r\n                  <hr />\r\n                </Col>\r\n              </Row>\r\n              <Row>\r\n                <Col xs={6}>\r\n                  Total Price : <strong>{orderSelected[0].Price} €</strong>\r\n                </Col>\r\n                <Col xs={6}>\r\n                  Shipping Date :{\" \"}\r\n                  <strong>{orderSelected[0].OrderDate.slice(0, 10)}</strong>\r\n                </Col>\r\n              </Row>\r\n              <Row>\r\n                <Col xs={6}>\r\n                  <hr />\r\n                </Col>\r\n                <Col xs={6}>\r\n                  <hr />\r\n                </Col>\r\n              </Row>\r\n              <Row>\r\n                <Col xs={6}>\r\n                  Order Send status{\" \"}\r\n                  <Badge\r\n                    pill\r\n                    bg={orderSelected[0].HasBeenSend ? \"success\" : \"danger\"}\r\n                  >\r\n                    {orderSelected[0].HasBeenSend ? \"Pending...\" : \"On Storage\"}\r\n                    &nbsp;\r\n                  </Badge>\r\n                </Col>\r\n                <Col xs={6}>\r\n                  Order Delivered  status{\" \"}\r\n                  <Badge\r\n                    pill\r\n                    bg={orderSelected[0].HasBeenDelivered ? \"success\" : \"danger\"}\r\n                  >\r\n                    {orderSelected[0].HasBeenDelivered  ? \"Delivered\" : \"No Delivered\"}\r\n                    &nbsp;\r\n                  </Badge>\r\n                </Col>\r\n              </Row>\r\n            </>\r\n          )}\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"secondary\" onClick={handleClose}>\r\n            Close\r\n          </Button>\r\n          <Button variant=\"primary\" onClick={handleClose}>\r\n            Create Order Again\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n      <div className=\"title\">\r\n        <div class=\"container py-4\">\r\n          <header class=\"pb-3 mb-4 border-bottom\">\r\n            <a class=\"d-flex align-items-center text-dark text-decoration-none\">\r\n              <span class=\"fs-4\">WineLovers Website - Previous Order</span>\r\n            </a>\r\n          </header>{\" \"}\r\n        </div>\r\n        {history.length !== 0 && (\r\n          <>\r\n            <Row>\r\n              <Col md={{ span: 6, offset: 3 }}>\r\n                <Table\r\n                  striped\r\n                  bordered\r\n                  hover\r\n                  size=\"sm\"\r\n                  className=\"personal-details-table\"\r\n                >\r\n                  <thead>\r\n                    <tr>\r\n                      <th>Order Details</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {history.map((historyy) => (\r\n                      <tr>\r\n                        <td>\r\n                          <Row>\r\n                            <Col xs={4}>\r\n                              Date:{\" \"}\r\n                              <strong>{historyy.OrderDate.slice(0, 10)}</strong>\r\n                            </Col>\r\n                            <Col md={{ span: 1, offset: 6 }}>\r\n                              <h4>\r\n                                <BiDetail\r\n                                  title=\"Order Details\"\r\n                                  className=\"order-details-icon\"\r\n                                  onClick={() => {\r\n                                    handleShow();\r\n\r\n                                    for (const key in history) {\r\n                                      if (history[key]._id === historyy._id) {\r\n                                        console.log(history[key]);\r\n                                        setOrderSelected([history[key]]);\r\n                                      }\r\n                                    }\r\n                                  }}\r\n                                />\r\n                              </h4>\r\n                            </Col>\r\n                          </Row>\r\n                          <br />\r\n                          <Row>\r\n                            <Col xs={8}>\r\n                              {historyy.Wines.map((wine) => (\r\n                                <p>&#8226; {wine.wine.WineName}</p>\r\n                              ))}\r\n                            </Col>\r\n                          </Row>\r\n                        </td>\r\n                      </tr>\r\n                    ))}\r\n                  </tbody>\r\n                </Table>\r\n              </Col>\r\n            </Row>\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default History;\r\n"]},"metadata":{},"sourceType":"module"}