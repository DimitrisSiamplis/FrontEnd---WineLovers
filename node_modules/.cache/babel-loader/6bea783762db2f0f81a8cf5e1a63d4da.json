{"ast":null,"code":"import _slicedToArray from\"C:/Users/dimitris.siamplis/Desktop/React-Node/Front-End/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from\"react\";import{useParams}from\"react-router-dom\";import\"./WineProfile.css\";import{useState,useEffect}from\"react\";// import Cookies from \"universal-cookie\";\nimport{Button,Container,Row,Col,Form,Modal}from\"react-bootstrap\";import{FontAwesomeIcon}from\"@fortawesome/react-fontawesome\";import{faStar}from\"@fortawesome/free-solid-svg-icons\";// import { faFilter } from \"@fortawesome/free-solid-svg-icons\";\nimport{differenceInDays,diffInHoursFunc,diffInMinutesFunc,diffInSecFunc}from\"./Functions/functions\";import Cookies from\"universal-cookie\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var WineProfile=function WineProfile(){var _useParams=useParams(),id=_useParams.id;var _useState=useState(),_useState2=_slicedToArray(_useState,2),wine=_useState2[0],setWine=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),showComments=_useState4[0],setShowComments=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),newComment=_useState6[0],setNewComment=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),newRate=_useState8[0],setNewRate=_useState8[1];var _useState9=useState([{class:\"noSelected\",item:0},{class:\"noSelected\",item:1},{class:\"noSelected\",item:2},{class:\"noSelected\",item:3},{class:\"noSelected\",item:4}]),_useState10=_slicedToArray(_useState9,2),faStarIcon=_useState10[0],setFaStarIcon=_useState10[1];var cookies=new Cookies();var userEmail=cookies.get(\"email\");useEffect(function(){var num=faStarIcon.filter(function(e){return e.class!==\"noSelected\";}).length;setNewRate(num);console.log(num);},[faStarIcon]);//-------------- Get Wine info + Comments details ---------------------------\nvar getWine=function getWine(){fetch(\"https://winelovers.herokuapp.com/getWine/\"+id).then(function(res){return res.json();}).then(function(json){console.log(json);setWine(json);});};useEffect(function(){getWine();},[]);var onCreateCommentHandler=function onCreateCommentHandler(){console.log(newComment,userEmail,id);var commentDetails={newComment:newComment,userEmail:userEmail,newRate:newRate,id:id};fetch(\"https://winelovers.herokuapp.com/newWineComment\",{method:\"POST\",body:JSON.stringify(commentDetails),headers:{\"Content-Type\":\"application/json\"}}).then(function(res){return res.json();}).then(function(json){console.log(json);setNewRate(0);setNewComment(\"\");getWine();});};var onClickOnStarIcon=function onClickOnStarIcon(item){var newFaStarIcon=[];for(var i=0;i<5;i++){if(i<item+1){newFaStarIcon.push({class:\"Selected\",item:i});}else{newFaStarIcon.push({class:\"noSelected\",item:i});}}setFaStarIcon(newFaStarIcon);};return/*#__PURE__*/_jsx(\"div\",{children:wine!==undefined&&/*#__PURE__*/_jsx(\"div\",{className:\"wine\",children:/*#__PURE__*/_jsx(Container,{className:\"item\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card card-body\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"media align-items-center align-items-lg-start text-center text-lg-left flex-column flex-lg-row\",children:[/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{xs:3,children:/*#__PURE__*/_jsx(\"div\",{className:\"mr-2 mb-3 mb-lg-0\",children:/*#__PURE__*/_jsx(\"img\",{className:\"wineProfileImage\",src:wine.wine.ImageUrl})})}),/*#__PURE__*/_jsx(Col,{xs:9,children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"media-body\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"wineTitle\",children:wine.wine.WineName}),/*#__PURE__*/_jsxs(\"ul\",{className:\"list-inline list-inline-dotted mb-3 mb-xl-2\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"list-inline-item\",children:/*#__PURE__*/_jsx(\"a\",{href:\"#\",className:\"text-muted\",\"data-abc\":\"true\",children:wine.wine.Type})}),/*#__PURE__*/_jsx(\"li\",{className:\"list-inline-item\",children:/*#__PURE__*/_jsx(\"a\",{href:\"#\",className:\"text-muted\",\"data-abc\":\"true\",children:wine.wine.Color})}),/*#__PURE__*/_jsx(\"li\",{className:\"list-inline-item\",children:/*#__PURE__*/_jsx(\"a\",{href:\"#\",className:\"text-muted\",\"data-abc\":\"true\",children:wine.wine.Year})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"li\",{className:\"list-inline-item\",children:/*#__PURE__*/_jsxs(\"a\",{href:\"#\",className:\"text-muted\",\"data-abc\":\"true\",children:[wine.wine.Location,\" , \",wine.wine.Country]})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 mt-lg-0 ml-lg-3 text-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-muted\",children:[\" \",wine.Comments.length,\" reviews\",\" \"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-muted\",children:[\"Total rate :\",\" \",wine.total_rating===null?0:wine.total_rating.toFixed(2),\" \",/*#__PURE__*/_jsx(FontAwesomeIcon,{className:\"starIcon\",icon:faStar,size:\"1x\"}),\" \"]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"ul\",{className:\"list-inline list-inline-dotted mb-0\",children:[/*#__PURE__*/_jsxs(\"li\",{className:\"list-inline-item\",children:[\" \",/*#__PURE__*/_jsx(\"strong\",{children:\"Grape : \"}),\" \",wine.wine.Grapes,\" \"]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"li\",{className:\"list-inline-item\",children:[\" \",/*#__PURE__*/_jsx(\"strong\",{children:\"Winery by\"}),\" \",/*#__PURE__*/_jsxs(\"a\",{target:\"_blank\",href:\"https://www.google.com/search?q=\".concat(wine.wine.Winery),\"data-abc\":\"true\",children:[\" \",wine.wine.Winery,\" \"]})]}),/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsx(\"strong\",{children:\"Wine discription\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mb-3\",children:wine.wine.WineDescription}),/*#__PURE__*/_jsx(Button,{variant:\"warning\",title:\"Add to Card\"})]})]})})]}),/*#__PURE__*/_jsx(Row,{className:\"rowComment\",children:/*#__PURE__*/_jsx(Col,{xs:12,children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"span\",{className:\"badge bg-white d-flex flex-row align-items-center\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-primary\",children:[\"Comments \",showComments?\"ON\":\"OFF\",\" \"]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-check form-switch\",children:/*#__PURE__*/_jsx(\"input\",{className:\"form-check-input\",type:\"checkbox\",id:\"flexSwitchCheckChecked\",defaultChecked:true,onChange:function onChange(e){setShowComments(e.target.checked);}})})]}),showComments&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Comments & Rating\"}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex flex-row add-comment-section mt-4 mb-4\",children:/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control mr-3\",placeholder:\"Leave comment\",value:newComment,onChange:function onChange(e){setNewComment(e.target.value);}})}),/*#__PURE__*/_jsx(Form.Label,{children:\"Rate\\xA0wine\\xA0 \"}),/*#__PURE__*/_jsx(\"br\",{}),faStarIcon.map(function(icon){return/*#__PURE__*/_jsx(FontAwesomeIcon,{className:icon.class,icon:faStar,size:\"1x\",onClick:function onClick(){return onClickOnStarIcon(icon.item);}});}),/*#__PURE__*/_jsxs(\"strong\",{children:[\"\\xA0\\xA0\",newRate,\" / 5 rating\"]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",type:\"button\",disabled:newComment.trim()===\"\"||newComment.trim().length>300||newRate===0,onClick:onCreateCommentHandler,children:\"Comment\"}),/*#__PURE__*/_jsx(\"hr\",{}),wine.Comments.map(function(comment){return/*#__PURE__*/_jsxs(\"div\",{className:\"commented-section mt-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-row align-items-center commented-user\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"mr-2\",children:comment.user.Name}),\"\\xA0\",/*#__PURE__*/_jsx(\"span\",{className:\"dot mb-1\"}),\"\\xA0\",/*#__PURE__*/_jsxs(\"span\",{className:\"mb-1 ml-2\",children:[differenceInDays(comment.comment.CommentDate)==0?diffInHoursFunc(comment.comment.CommentDate)===0?diffInMinutesFunc(comment.comment.CommentDate)===0?diffInSecFunc(comment.comment.CommentDate)+\" seconds\":diffInMinutesFunc(comment.comment.CommentDate)+\" minutes\":diffInHoursFunc(comment.comment.CommentDate)+\" hours\":differenceInDays(comment.comment.CommentDate)+\" days\",\" \",\"ago\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"comment-text-sm\",children:/*#__PURE__*/_jsx(\"span\",{children:comment.comment.Comment})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsxs(\"strong\",{children:[\" \",\"Rate : \",comment.comment.Rating,\" \",/*#__PURE__*/_jsx(FontAwesomeIcon,{className:\"starIcon\",icon:faStar,size:\"1x\"})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"reply-section\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-row align-items-center voting-icons\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-sort-up fa-2x mt-3 hit-voting\"}),/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-sort-down fa-2x mb-3 hit-voting\"})]})}),/*#__PURE__*/_jsx(\"hr\",{})]});})]})]})})})]})})})})});};export default WineProfile;","map":{"version":3,"sources":["C:/Users/dimitris.siamplis/Desktop/React-Node/Front-End/src/pages/WineProfile.js"],"names":["React","useParams","useState","useEffect","Button","Container","Row","Col","Form","Modal","FontAwesomeIcon","faStar","differenceInDays","diffInHoursFunc","diffInMinutesFunc","diffInSecFunc","Cookies","WineProfile","id","wine","setWine","showComments","setShowComments","newComment","setNewComment","newRate","setNewRate","class","item","faStarIcon","setFaStarIcon","cookies","userEmail","get","num","filter","e","length","console","log","getWine","fetch","then","res","json","onCreateCommentHandler","commentDetails","method","body","JSON","stringify","headers","onClickOnStarIcon","newFaStarIcon","i","push","undefined","ImageUrl","WineName","Type","Color","Year","Location","Country","Comments","total_rating","toFixed","Grapes","Winery","WineDescription","target","checked","value","map","icon","trim","comment","user","Name","CommentDate","Comment","Rating"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport \"./WineProfile.css\";\r\nimport { useState, useEffect } from \"react\";\r\n// import Cookies from \"universal-cookie\";\r\nimport { Button, Container, Row, Col, Form, Modal } from \"react-bootstrap\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faStar } from \"@fortawesome/free-solid-svg-icons\";\r\n// import { faFilter } from \"@fortawesome/free-solid-svg-icons\";\r\nimport {\r\n  differenceInDays,\r\n  diffInHoursFunc,\r\n  diffInMinutesFunc,\r\n  diffInSecFunc,\r\n} from \"./Functions/functions\";\r\nimport Cookies from \"universal-cookie\";\r\n\r\nconst WineProfile = () => {\r\n  const { id } = useParams();\r\n  const [wine, setWine] = useState();\r\n  const [showComments, setShowComments] = useState(true);\r\n  const [newComment, setNewComment] = useState(\"\");\r\n  const [newRate, setNewRate] = useState(0);\r\n\r\n  const [faStarIcon, setFaStarIcon] = useState([\r\n    { class: \"noSelected\", item: 0 },\r\n    { class: \"noSelected\", item: 1 },\r\n    { class: \"noSelected\", item: 2 },\r\n    { class: \"noSelected\", item: 3 },\r\n    { class: \"noSelected\", item: 4 },\r\n  ]);\r\n\r\n  const cookies = new Cookies();\r\n  var userEmail = cookies.get(\"email\");\r\n\r\n  useEffect(() => {\r\n    let num = faStarIcon.filter(function (e) {\r\n      return e.class !== \"noSelected\";\r\n    }).length;\r\n    setNewRate(num);\r\n    console.log(num);\r\n  }, [faStarIcon]);\r\n  //-------------- Get Wine info + Comments details ---------------------------\r\n  const getWine = () => {\r\n    fetch(\"https://winelovers.herokuapp.com/getWine/\" + id)\r\n      .then((res) => res.json())\r\n      .then((json) => {\r\n        console.log(json);\r\n        setWine(json);\r\n      });\r\n  };\r\n  useEffect(() => {\r\n    getWine();\r\n  }, []);\r\n\r\n  const onCreateCommentHandler = () => {\r\n    console.log(newComment, userEmail, id);\r\n    let commentDetails = {\r\n      newComment: newComment,\r\n      userEmail: userEmail,\r\n      newRate: newRate,\r\n      id: id,\r\n    };\r\n    fetch(\"https://winelovers.herokuapp.com/newWineComment\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify(commentDetails),\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n    })\r\n      .then((res) => res.json())\r\n      .then((json) => {\r\n        console.log(json);\r\n        setNewRate(0);\r\n        setNewComment(\"\");\r\n        getWine();\r\n      });\r\n  };\r\n\r\n  const onClickOnStarIcon = (item) => {\r\n    var newFaStarIcon = [];\r\n    for (let i = 0; i < 5; i++) {\r\n      if (i < item + 1) {\r\n        newFaStarIcon.push({\r\n          class: \"Selected\",\r\n          item: i,\r\n        });\r\n      } else {\r\n        newFaStarIcon.push({\r\n          class: \"noSelected\",\r\n          item: i,\r\n        });\r\n      }\r\n    }\r\n    setFaStarIcon(newFaStarIcon);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {wine !== undefined && (\r\n        <div className=\"wine\">\r\n          <Container className=\"item\">\r\n            <div className=\"card card-body\">\r\n              <div className=\"media align-items-center align-items-lg-start text-center text-lg-left flex-column flex-lg-row\">\r\n                <Row>\r\n                  <Col xs={3}>\r\n                    <div className=\"mr-2 mb-3 mb-lg-0\">\r\n                      <img\r\n                        className=\"wineProfileImage\"\r\n                        src={wine.wine.ImageUrl}\r\n                      />\r\n                    </div>\r\n                  </Col>\r\n                  <Col xs={9}>\r\n                    <div>\r\n                      <div className=\"media-body\">\r\n                        <h2 className=\"wineTitle\">{wine.wine.WineName}</h2>\r\n\r\n                        <ul className=\"list-inline list-inline-dotted mb-3 mb-xl-2\">\r\n                          <li className=\"list-inline-item\">\r\n                            <a href=\"#\" className=\"text-muted\" data-abc=\"true\">\r\n                              {wine.wine.Type}\r\n                            </a>\r\n                          </li>\r\n                          <li className=\"list-inline-item\">\r\n                            <a href=\"#\" className=\"text-muted\" data-abc=\"true\">\r\n                              {wine.wine.Color}\r\n                            </a>\r\n                          </li>\r\n                          <li className=\"list-inline-item\">\r\n                            <a href=\"#\" className=\"text-muted\" data-abc=\"true\">\r\n                              {wine.wine.Year}\r\n                            </a>\r\n                          </li>\r\n                          <br />\r\n                          <li className=\"list-inline-item\">\r\n                            <a href=\"#\" className=\"text-muted\" data-abc=\"true\">\r\n                              {wine.wine.Location} , {wine.wine.Country}\r\n                            </a>\r\n                          </li>\r\n                        </ul>\r\n                      </div>\r\n                      <div className=\"mt-3 mt-lg-0 ml-lg-3 text-center\">\r\n                        <div className=\"text-muted\">\r\n                          {\" \"}\r\n                          {wine.Comments.length} reviews{\" \"}\r\n                        </div>\r\n                        <div className=\"text-muted\">\r\n                          Total rate :{\" \"}\r\n                          {wine.total_rating === null\r\n                            ? 0\r\n                            : wine.total_rating.toFixed(2)}{\" \"}\r\n                          <FontAwesomeIcon\r\n                            className=\"starIcon\"\r\n                            icon={faStar}\r\n                            size=\"1x\"\r\n                          />{\" \"}\r\n                        </div>\r\n                        <br />\r\n                        {/* <h3 className=\"mb-0 font-weight-semibold\">\r\n                          {\" \"}\r\n                          Price : {wine.wine.Price}€\r\n                        </h3> */}\r\n\r\n                        <ul className=\"list-inline list-inline-dotted mb-0\">\r\n                          <li className=\"list-inline-item\">\r\n                            {\" \"}\r\n                            <strong>Grape : </strong> {wine.wine.Grapes}{\" \"}\r\n                          </li>\r\n                          <br />\r\n                          <li className=\"list-inline-item\">\r\n                            {\" \"}\r\n                            <strong>Winery by</strong>{\" \"}\r\n                            <a\r\n                              target=\"_blank\"\r\n                              href={`https://www.google.com/search?q=${wine.wine.Winery}`}\r\n                              data-abc=\"true\"\r\n                            >\r\n                              {\" \"}\r\n                              {wine.wine.Winery}{\" \"}\r\n                            </a>\r\n                          </li>\r\n                          <br /> <br />\r\n                        </ul>\r\n                        <strong>Wine discription</strong>\r\n                        <p className=\"mb-3\">{wine.wine.WineDescription}</p>\r\n\r\n                        <Button variant=\"warning\" title=\"Add to Card\">\r\n                          {/* <FontAwesomeIcon icon={faCartPlus} size=\"1x\" /> */}\r\n                        </Button>\r\n                      </div>\r\n                    </div>\r\n                  </Col>\r\n                </Row>\r\n\r\n                <Row className=\"rowComment\">\r\n                  {/* <Col xs={2}></Col> */}\r\n                  <Col xs={12}>\r\n                    <div>\r\n                      <br />\r\n                      <span className=\"badge bg-white d-flex flex-row align-items-center\">\r\n                        <span className=\"text-primary\">\r\n                          Comments {showComments ? \"ON\" : \"OFF\"}{\" \"}\r\n                        </span>\r\n                        <div className=\"form-check form-switch\">\r\n                          <input\r\n                            className=\"form-check-input\"\r\n                            type=\"checkbox\"\r\n                            id=\"flexSwitchCheckChecked\"\r\n                            defaultChecked={true}\r\n                            onChange={(e) => {\r\n                              setShowComments(e.target.checked);\r\n                            }}\r\n                          />\r\n                        </div>\r\n                      </span>\r\n                      {showComments && (\r\n                        <div>\r\n                          <h5>Comments & Rating</h5>\r\n                          <div className=\"d-flex flex-row add-comment-section mt-4 mb-4\">\r\n                            <textarea\r\n                              className=\"form-control mr-3\"\r\n                              placeholder=\"Leave comment\"\r\n                              value={newComment}\r\n                              onChange={(e) => {\r\n                                setNewComment(e.target.value);\r\n                              }}\r\n                            ></textarea>\r\n                          </div>\r\n                          <Form.Label>Rate&nbsp;wine&nbsp; </Form.Label>\r\n                          <br />\r\n                          {faStarIcon.map((icon) => (\r\n                            <FontAwesomeIcon\r\n                              className={icon.class}\r\n                              icon={faStar}\r\n                              size=\"1x\"\r\n                              onClick={() => onClickOnStarIcon(icon.item)}\r\n                            />\r\n                          ))}\r\n\r\n                          <strong>&nbsp;&nbsp;{newRate} / 5 rating</strong>\r\n\r\n                          <br />\r\n                          <button\r\n                            className=\"btn btn-primary\"\r\n                            type=\"button\"\r\n                            disabled={\r\n                              newComment.trim() === \"\" ||\r\n                              newComment.trim().length > 300 ||\r\n                              newRate === 0\r\n                            }\r\n                            onClick={onCreateCommentHandler}\r\n                          >\r\n                            Comment\r\n                          </button>\r\n                          <hr />\r\n                          {wine.Comments.map((comment) => (\r\n                            <div className=\"commented-section mt-2\">\r\n                              <div className=\"d-flex flex-row align-items-center commented-user\">\r\n                                <h5 className=\"mr-2\">{comment.user.Name}</h5>\r\n                                &nbsp;\r\n                                <span className=\"dot mb-1\"></span>\r\n                                &nbsp;\r\n                                <span className=\"mb-1 ml-2\">\r\n                                  {differenceInDays(\r\n                                    comment.comment.CommentDate\r\n                                  ) == 0\r\n                                    ? diffInHoursFunc(\r\n                                        comment.comment.CommentDate\r\n                                      ) === 0\r\n                                      ? diffInMinutesFunc(\r\n                                          comment.comment.CommentDate\r\n                                        ) === 0\r\n                                        ? diffInSecFunc(\r\n                                            comment.comment.CommentDate\r\n                                          ) + \" seconds\"\r\n                                        : diffInMinutesFunc(\r\n                                            comment.comment.CommentDate\r\n                                          ) + \" minutes\"\r\n                                      : diffInHoursFunc(\r\n                                          comment.comment.CommentDate\r\n                                        ) + \" hours\"\r\n                                    : differenceInDays(\r\n                                        comment.comment.CommentDate\r\n                                      ) + \" days\"}{\" \"}\r\n                                  ago\r\n                                </span>\r\n                              </div>\r\n                              <div className=\"comment-text-sm\">\r\n                                <span>{comment.comment.Comment}</span>\r\n                              </div>\r\n                              <div>\r\n                                <span>\r\n                                  <strong>\r\n                                    {\" \"}\r\n                                    Rate : {comment.comment.Rating}{\" \"}\r\n                                    <FontAwesomeIcon\r\n                                      className=\"starIcon\"\r\n                                      icon={faStar}\r\n                                      size=\"1x\"\r\n                                    />\r\n                                  </strong>\r\n                                </span>\r\n                              </div>\r\n                              <div className=\"reply-section\">\r\n                                <div className=\"d-flex flex-row align-items-center voting-icons\">\r\n                                  <i className=\"fa fa-sort-up fa-2x mt-3 hit-voting\"></i>\r\n                                  <i className=\"fa fa-sort-down fa-2x mb-3 hit-voting\"></i>\r\n                                </div>\r\n                              </div>\r\n                              <hr />\r\n                            </div>\r\n                          ))}\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </Col>\r\n                </Row>\r\n              </div>\r\n            </div>\r\n          </Container>\r\n        </div>\r\n      )}\r\n      \r\n    </div>\r\n  );\r\n};\r\n\r\nexport default WineProfile;\r\n"]},"metadata":{},"sourceType":"module"}