{"ast":null,"code":"import _slicedToArray from\"C:/Users/dimitris.siamplis/Desktop/React-Node/Front-End/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from\"react\";import\"./History.css\";import\"./Card.css\";import{useState,useEffect}from\"react\";import Cookies from\"universal-cookie\";import{BiDetail}from\"react-icons/bi\";import{AiOutlineCalendar,AiOutlineHome,AiOutlineMail,AiOutlinePhone}from\"react-icons/ai\";import{RiMoneyEuroCircleLine}from\"react-icons/ri\";import{MdOutlineDeliveryDining}from\"react-icons/md\";import{FaWineBottle}from\"react-icons/fa\";import{BsFillPersonFill,BsCreditCard,BsQuestionOctagon}from\"react-icons/bs\";import{dateFormater,addDays}from\"./Functions/functions\";import{Table,Row,Col,Modal,Button,Badge}from\"react-bootstrap\";import{useHistory}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var History=function History(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),history=_useState2[0],setHistory=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),orderSelected=_useState4[0],setOrderSelected=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),show=_useState6[0],setShow=_useState6[1];var handleClose=function handleClose(){return setShow(false);};var handleShow=function handleShow(){return setShow(true);};var cookies=new Cookies();var userEmail=cookies.get(\"email\");var historyUrl=useHistory();var getHistory=function getHistory(){fetch(\"http://localhost:4000/getHistory/\".concat(userEmail)).then(function(res){return res.json();}).then(function(json){console.log(json);setHistory(json);});};useEffect(function(){getHistory();},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Modal,{show:show,onHide:handleClose,size:\"lg\",children:[/*#__PURE__*/_jsx(Modal.Body,{children:orderSelected.length!==0&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsxs(Col,{children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Order Details\"}),/*#__PURE__*/_jsx(\"br\",{})]})}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{xs:6,children:[\"Order Id : \",/*#__PURE__*/_jsx(\"strong\",{children:orderSelected[0]._id})]}),/*#__PURE__*/_jsxs(Col,{xs:6,children:[/*#__PURE__*/_jsx(AiOutlineCalendar,{className:\"history-icon\"}),\" Order Date :\",\" \",/*#__PURE__*/_jsx(\"strong\",{children:orderSelected[0].OrderDate.slice(0,10)})]})]}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{xs:6,children:/*#__PURE__*/_jsx(\"hr\",{})}),/*#__PURE__*/_jsx(Col,{xs:6,children:/*#__PURE__*/_jsx(\"hr\",{})})]}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{xs:6,children:[/*#__PURE__*/_jsx(RiMoneyEuroCircleLine,{className:\"history-icon\"}),\"Total Price : \",/*#__PURE__*/_jsxs(\"strong\",{children:[orderSelected[0].Price,\" \\u20AC\"]})]}),/*#__PURE__*/_jsxs(Col,{xs:6,children:[/*#__PURE__*/_jsx(AiOutlineCalendar,{className:\"history-icon\"}),\" Shipping Date :\",\" \",/*#__PURE__*/_jsx(\"strong\",{children:orderSelected[0].OrderDate.slice(0,10)})]})]}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{xs:6,children:/*#__PURE__*/_jsx(\"hr\",{})}),/*#__PURE__*/_jsx(Col,{xs:6,children:/*#__PURE__*/_jsx(\"hr\",{})})]}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{xs:6,children:[/*#__PURE__*/_jsx(BsQuestionOctagon,{className:\"history-icon\"}),\" Order Send status\",\" \",/*#__PURE__*/_jsxs(Badge,{pill:true,bg:orderSelected[0].HasBeenSend?\"success\":\"danger\",children:[orderSelected[0].HasBeenSend?\"Pending...\":\"On Storage\",\"\\xA0\"]})]}),/*#__PURE__*/_jsxs(Col,{xs:6,children:[/*#__PURE__*/_jsx(MdOutlineDeliveryDining,{className:\"history-icon\"}),\" Order Delivered status\",\" \",/*#__PURE__*/_jsxs(Badge,{pill:true,bg:orderSelected[0].HasBeenDelivered?\"success\":\"danger\",children:[orderSelected[0].HasBeenDelivered?\"Delivered\":\"No Delivered\",\"\\xA0\"]})]})]}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{xs:6,children:/*#__PURE__*/_jsx(\"hr\",{})}),/*#__PURE__*/_jsx(Col,{xs:6,children:/*#__PURE__*/_jsx(\"hr\",{})})]}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{xs:6,children:[/*#__PURE__*/_jsx(BsCreditCard,{className:\"history-icon\"}),\" Payment Kind :\",\" \",/*#__PURE__*/_jsx(\"strong\",{children:orderSelected[0].KindPayment})]}),/*#__PURE__*/_jsxs(Col,{xs:6,children:[/*#__PURE__*/_jsx(AiOutlineHome,{className:\"history-icon\"}),\" Address :\",\" \",/*#__PURE__*/_jsx(\"strong\",{children:orderSelected[0].Address})]})]}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{xs:6,children:/*#__PURE__*/_jsx(\"hr\",{})}),/*#__PURE__*/_jsx(Col,{xs:6,children:/*#__PURE__*/_jsx(\"hr\",{})})]}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{xs:6,children:[\"Zip : \",/*#__PURE__*/_jsx(\"strong\",{children:orderSelected[0].Zip})]}),/*#__PURE__*/_jsxs(Col,{xs:6,children:[/*#__PURE__*/_jsx(AiOutlineMail,{className:\"history-icon\"}),\" Email :\",\" \",/*#__PURE__*/_jsx(\"strong\",{children:orderSelected[0].Email})]})]}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{xs:6,children:/*#__PURE__*/_jsx(\"hr\",{})}),/*#__PURE__*/_jsx(Col,{xs:6,children:/*#__PURE__*/_jsx(\"hr\",{})})]}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{xs:6,children:[/*#__PURE__*/_jsx(AiOutlinePhone,{className:\"history-icon\"}),\" Phone :\",\" \",/*#__PURE__*/_jsx(\"strong\",{children:orderSelected[0].Phone})]}),/*#__PURE__*/_jsxs(Col,{xs:6,children:[/*#__PURE__*/_jsx(BsFillPersonFill,{className:\"history-icon\"}),\" Name :\",\" \",/*#__PURE__*/_jsxs(\"strong\",{children:[orderSelected[0].FirstName,\" \",orderSelected[0].LastName]})]})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsxs(Col,{children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Wines\"}),/*#__PURE__*/_jsx(\"br\",{})]})}),/*#__PURE__*/_jsx(Row,{children:orderSelected[0].Wines.map(function(wine){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Col,{xs:1,children:/*#__PURE__*/_jsx(\"img\",{src:wine.wine.ImageUrl})}),/*#__PURE__*/_jsxs(Col,{xs:5,children:[/*#__PURE__*/_jsx(\"strong\",{className:\"click-wine-history\",onClick:function onClick(){historyUrl.push(\"/wine/\"+wine.wine._id);},children:wine.wine.WineName}),/*#__PURE__*/_jsxs(\"p\",{children:[wine.wine.Type,\" ,\",wine.wine.Color,\" , \",wine.wine.Year,\" \"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Amount : \",/*#__PURE__*/_jsxs(\"strong\",{children:[\" \",wine.amount,\" \"]})]})]})]});})})]})}),/*#__PURE__*/_jsxs(Modal.Footer,{children:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:handleClose,children:\"Close\"}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:handleClose,children:\"Create Order Again\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"title\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"container py-4\",children:[/*#__PURE__*/_jsx(\"header\",{className:\"pb-3 mb-4 border-bottom\",children:/*#__PURE__*/_jsx(\"a\",{className:\"d-flex align-items-center text-dark text-decoration-none\",children:/*#__PURE__*/_jsx(\"span\",{className:\"fs-4\",children:\"WineLovers Website - Previous Order\"})})}),\" \"]}),history.length!==0&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{md:{span:6,offset:3},children:/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,size:\"sm\",className:\"personal-details-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"th\",{children:\"Order Details\"})})}),/*#__PURE__*/_jsx(\"tbody\",{children:history.map(function(historyy){return/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{xs:6,children:[\"Order Id: \",/*#__PURE__*/_jsx(\"strong\",{children:historyy._id}),/*#__PURE__*/_jsx(\"br\",{}),\"Date:\",\" \",/*#__PURE__*/_jsx(\"strong\",{children:historyy.OrderDate.slice(0,10)})]}),/*#__PURE__*/_jsx(Col,{md:{span:1,offset:4},children:/*#__PURE__*/_jsx(\"h4\",{children:/*#__PURE__*/_jsx(BiDetail,{title:\"Order Details\",className:\"order-details-icon\",onClick:function onClick(){handleShow();for(var key in history){if(history[key]._id===historyy._id){setOrderSelected([history[key]]);}}}})})})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{xs:8,children:historyy.Wines.map(function(wine){return/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u2022 \",wine.wine.WineName]},wine.wine._id);})})})]})},historyy._id);})})]})})})})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{})]});};export default History;","map":{"version":3,"sources":["C:/Users/dimitris.siamplis/Desktop/React-Node/Front-End/src/pages/History.js"],"names":["React","useState","useEffect","Cookies","BiDetail","AiOutlineCalendar","AiOutlineHome","AiOutlineMail","AiOutlinePhone","RiMoneyEuroCircleLine","MdOutlineDeliveryDining","FaWineBottle","BsFillPersonFill","BsCreditCard","BsQuestionOctagon","dateFormater","addDays","Table","Row","Col","Modal","Button","Badge","useHistory","History","history","setHistory","orderSelected","setOrderSelected","show","setShow","handleClose","handleShow","cookies","userEmail","get","historyUrl","getHistory","fetch","then","res","json","console","log","length","_id","OrderDate","slice","Price","HasBeenSend","HasBeenDelivered","KindPayment","Address","Zip","Email","Phone","FirstName","LastName","Wines","map","wine","ImageUrl","push","WineName","Type","Color","Year","amount","span","offset","historyy","key"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport \"./History.css\";\r\nimport \"./Card.css\";\r\nimport { useState, useEffect } from \"react\";\r\nimport Cookies from \"universal-cookie\";\r\nimport { BiDetail } from \"react-icons/bi\";\r\nimport {\r\n  AiOutlineCalendar,\r\n  AiOutlineHome,\r\n  AiOutlineMail,\r\n  AiOutlinePhone,\r\n} from \"react-icons/ai\";\r\nimport { RiMoneyEuroCircleLine } from \"react-icons/ri\";\r\nimport { MdOutlineDeliveryDining } from \"react-icons/md\";\r\nimport { FaWineBottle } from \"react-icons/fa\";\r\n\r\nimport {\r\n  BsFillPersonFill,\r\n  BsCreditCard,\r\n  BsQuestionOctagon,\r\n} from \"react-icons/bs\";\r\n\r\nimport { dateFormater, addDays } from \"./Functions/functions\";\r\nimport { Table, Row, Col, Modal, Button, Badge } from \"react-bootstrap\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst History = () => {\r\n  const [history, setHistory] = useState([]);\r\n  const [orderSelected, setOrderSelected] = useState([]);\r\n  const [show, setShow] = useState(false);\r\n  const handleClose = () => setShow(false);\r\n  const handleShow = () => setShow(true);\r\n\r\n  const cookies = new Cookies();\r\n  var userEmail = cookies.get(\"email\");\r\n\r\n  let historyUrl = useHistory();\r\n\r\n  const getHistory = () => {\r\n    fetch(`http://localhost:4000/getHistory/${userEmail}`)\r\n      .then((res) => res.json())\r\n      .then((json) => {\r\n        console.log(json);\r\n        setHistory(json);\r\n      });\r\n  };\r\n\r\n  useEffect(() => {\r\n    getHistory();\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      <Modal show={show} onHide={handleClose} size=\"lg\">\r\n        <Modal.Body>\r\n          {orderSelected.length !== 0 && (\r\n            <>\r\n              <Row>\r\n                <Col>\r\n                  <h4>Order Details</h4>\r\n                  <br />\r\n                </Col>\r\n              </Row>\r\n              <Row>\r\n                <Col xs={6}>\r\n                  Order Id : <strong>{orderSelected[0]._id}</strong>\r\n                </Col>\r\n                <Col xs={6}>\r\n                  <AiOutlineCalendar className=\"history-icon\" /> Order Date :{\" \"}\r\n                  <strong>{orderSelected[0].OrderDate.slice(0, 10)}</strong>\r\n                </Col>\r\n              </Row>\r\n              <Row>\r\n                <Col xs={6}>\r\n                  <hr />\r\n                </Col>\r\n                <Col xs={6}>\r\n                  <hr />\r\n                </Col>\r\n              </Row>\r\n              <Row>\r\n                <Col xs={6}>\r\n                  <RiMoneyEuroCircleLine className=\"history-icon\" />\r\n                  Total Price : <strong>{orderSelected[0].Price} €</strong>\r\n                </Col>\r\n                <Col xs={6}>\r\n                  <AiOutlineCalendar className=\"history-icon\" /> Shipping Date :{\" \"}\r\n                  <strong>{orderSelected[0].OrderDate.slice(0, 10)}</strong>\r\n                </Col>\r\n              </Row>\r\n              <Row>\r\n                <Col xs={6}>\r\n                  <hr />\r\n                </Col>\r\n                <Col xs={6}>\r\n                  <hr />\r\n                </Col>\r\n              </Row>\r\n              <Row>\r\n                <Col xs={6}>\r\n                  <BsQuestionOctagon className=\"history-icon\" /> Order Send\r\n                  status{\" \"}\r\n                  <Badge\r\n                    pill\r\n                    bg={orderSelected[0].HasBeenSend ? \"success\" : \"danger\"}\r\n                  >\r\n                    {orderSelected[0].HasBeenSend ? \"Pending...\" : \"On Storage\"}\r\n                    &nbsp;\r\n                  </Badge>\r\n                </Col>\r\n                <Col xs={6}>\r\n                  <MdOutlineDeliveryDining className=\"history-icon\" /> Order\r\n                  Delivered status{\" \"}\r\n                  <Badge\r\n                    pill\r\n                    bg={\r\n                      orderSelected[0].HasBeenDelivered ? \"success\" : \"danger\"\r\n                    }\r\n                  >\r\n                    {orderSelected[0].HasBeenDelivered\r\n                      ? \"Delivered\"\r\n                      : \"No Delivered\"}\r\n                    &nbsp;\r\n                  </Badge>\r\n                </Col>\r\n              </Row>\r\n              <Row>\r\n                <Col xs={6}>\r\n                  <hr />\r\n                </Col>\r\n                <Col xs={6}>\r\n                  <hr />\r\n                </Col>\r\n              </Row>\r\n              <Row>\r\n                <Col xs={6}>\r\n                  <BsCreditCard className=\"history-icon\" /> Payment Kind :{\" \"}\r\n                  <strong>{orderSelected[0].KindPayment}</strong>\r\n                </Col>\r\n                <Col xs={6}>\r\n                  <AiOutlineHome className=\"history-icon\" /> Address :{\" \"}\r\n                  <strong>{orderSelected[0].Address}</strong>\r\n                </Col>\r\n              </Row>\r\n              <Row>\r\n                <Col xs={6}>\r\n                  <hr />\r\n                </Col>\r\n                <Col xs={6}>\r\n                  <hr />\r\n                </Col>\r\n              </Row>\r\n              <Row>\r\n                <Col xs={6}>\r\n                  Zip : <strong>{orderSelected[0].Zip}</strong>\r\n                </Col>\r\n                <Col xs={6}>\r\n                  <AiOutlineMail className=\"history-icon\" /> Email :{\" \"}\r\n                  <strong>{orderSelected[0].Email}</strong>\r\n                </Col>\r\n              </Row>\r\n              <Row>\r\n                <Col xs={6}>\r\n                  <hr />\r\n                </Col>\r\n                <Col xs={6}>\r\n                  <hr />\r\n                </Col>\r\n              </Row>\r\n              <Row>\r\n                <Col xs={6}>\r\n                  <AiOutlinePhone className=\"history-icon\" /> Phone :{\" \"}\r\n                  <strong>{orderSelected[0].Phone}</strong>\r\n                </Col>\r\n                <Col xs={6}>\r\n                  <BsFillPersonFill className=\"history-icon\" /> Name :{\" \"}\r\n                  <strong>\r\n                    {orderSelected[0].FirstName} {orderSelected[0].LastName}\r\n                  </strong>\r\n                </Col>\r\n              </Row>\r\n\r\n              <hr />\r\n              <Row>\r\n                <Col>\r\n                  <h4>\r\n                    Wines \r\n                  </h4>\r\n                  <br />\r\n                </Col>\r\n              </Row>\r\n              <Row>\r\n                {orderSelected[0].Wines.map((wine) => (\r\n                  <>\r\n                    <Col xs={1}>\r\n                      <img src={wine.wine.ImageUrl}></img>\r\n                    </Col>\r\n                    <Col xs={5}>\r\n                      <strong\r\n                        className=\"click-wine-history\"\r\n                        onClick={() => {\r\n                          historyUrl.push(\"/wine/\" + wine.wine._id);\r\n                        }}\r\n                      >\r\n                        {wine.wine.WineName}\r\n                      </strong>\r\n\r\n                      <p>\r\n                        {wine.wine.Type} ,{wine.wine.Color} , {wine.wine.Year}{\" \"}\r\n                      </p>\r\n                      <p>\r\n                        Amount : <strong> {wine.amount} </strong>\r\n                      </p>\r\n                    </Col>\r\n                  </>\r\n                ))}\r\n              </Row>\r\n            </>\r\n          )}\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"secondary\" onClick={handleClose}>\r\n            Close\r\n          </Button>\r\n          <Button variant=\"primary\" onClick={handleClose}>\r\n            Create Order Again\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n      <div className=\"title\">\r\n        <div className=\"container py-4\">\r\n          <header className=\"pb-3 mb-4 border-bottom\">\r\n            <a className=\"d-flex align-items-center text-dark text-decoration-none\">\r\n              <span className=\"fs-4\">WineLovers Website - Previous Order</span>\r\n            </a>\r\n          </header>{\" \"}\r\n        </div>\r\n        {history.length !== 0 && (\r\n          <>\r\n            <Row>\r\n              <Col md={{ span: 6, offset: 3 }}>\r\n                <Table\r\n                  striped\r\n                  bordered\r\n                  hover\r\n                  size=\"sm\"\r\n                  className=\"personal-details-table\"\r\n                >\r\n                  <thead>\r\n                    <tr>\r\n                      <th>Order Details</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {history.map((historyy) => (\r\n                      <tr key={historyy._id}>\r\n                        <td>\r\n                          <Row>\r\n                            <Col xs={6}>\r\n                              Order Id: <strong>{historyy._id}</strong>\r\n                              <br />\r\n                              Date:{\" \"}\r\n                              <strong>{historyy.OrderDate.slice(0, 10)}</strong>\r\n                            </Col>\r\n                            <Col md={{ span: 1, offset: 4 }}>\r\n                              <h4>\r\n                                <BiDetail\r\n                                  title=\"Order Details\"\r\n                                  className=\"order-details-icon\"\r\n                                  onClick={() => {\r\n                                    handleShow();\r\n\r\n                                    for (const key in history) {\r\n                                      if (history[key]._id === historyy._id) {\r\n                                        setOrderSelected([history[key]]);\r\n                                      }\r\n                                    }\r\n                                  }}\r\n                                />\r\n                              </h4>\r\n                            </Col>\r\n                          </Row>\r\n                          <br />\r\n                          <Row>\r\n                            <Col xs={8}>\r\n                              {historyy.Wines.map((wine) => (\r\n                                <p key={wine.wine._id}>\r\n                                  &#8226; {wine.wine.WineName}\r\n                                </p>\r\n                              ))}\r\n                            </Col>\r\n                          </Row>\r\n                        </td>\r\n                      </tr>\r\n                    ))}\r\n                  </tbody>\r\n                </Table>\r\n              </Col>\r\n            </Row>\r\n          </>\r\n        )}\r\n      </div>\r\n      <br />\r\n      <br />\r\n      <br />\r\n      <br />\r\n      <br />\r\n      <br />\r\n      <br />\r\n      <br />\r\n      <br />\r\n      <br />\r\n      <br />\r\n      <br />\r\n      <br />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default History;\r\n"]},"metadata":{},"sourceType":"module"}