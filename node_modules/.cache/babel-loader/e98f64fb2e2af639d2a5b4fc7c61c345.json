{"ast":null,"code":"import _slicedToArray from\"C:/Users/dimitris.siamplis/Desktop/React-Node/Front-End/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from\"react\";import\"./History.css\";import\"./Card.css\";import{useState,useEffect}from\"react\";import Cookies from\"universal-cookie\";import{FontAwesomeIcon}from\"@fortawesome/react-fontawesome\";import{faTrash}from\"@fortawesome/free-solid-svg-icons\";import{dateFormater,addDays}from\"./Functions/functions\";import{Table}from\"react-bootstrap\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var History=function History(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),history=_useState2[0],setHistory=_useState2[1];// const [wines, setWines] = useState([]);\nvar cookies=new Cookies();var userEmail=cookies.get(\"email\");var getHistory=function getHistory(){var userDetails={email:userEmail};fetch(\"http://localhost:4000/getHistory\",{method:\"POST\",body:JSON.stringify(userDetails),headers:{\"Content-Type\":\"application/json\"}}).then(function(res){return res.json();}).then(function(json){var historyArray=[];for(var key in json.history){//   console.log(json.history[key].WinesList);\nvar winesArray=[];for(var key1 in json.wines){// console.log(json.wines[key1]._id);\nif(json.history[key].WinesList.includes(json.wines[key1]._id)){winesArray.push(json.wines[key1]);}}historyArray.push({history:json.history[key],wines:winesArray});}console.log(historyArray);setHistory(historyArray);});};useEffect(function(){getHistory();},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"HistoryOrderTable\",children:\"History Order Table\"}),/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,className:\"tableHistory\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Wine Names\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Bootle Price\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Amount\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Total Price\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Order Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Shipping Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Address\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Payment Kind\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Extra Details\"})]})}),history.length!==0&&/*#__PURE__*/_jsx(\"tbody\",{children:history.map(function(item){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:item.wines.map(function(wine){return/*#__PURE__*/_jsxs(\"strong\",{children:[/*#__PURE__*/_jsx(\"a\",{href:\"/wine/\".concat(wine._id),children:wine.WineName}),/*#__PURE__*/_jsx(\"br\",{})]});})}),/*#__PURE__*/_jsx(\"td\",{children:item.wines.map(function(wine){return/*#__PURE__*/_jsxs(\"strong\",{children:[wine.Price,\" \\u20AC\",/*#__PURE__*/_jsx(\"br\",{})]});})}),/*#__PURE__*/_jsx(\"td\",{children:\"Otto\"}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"strong\",{children:[item.history.Price,\" \\u20AC\"]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"strong\",{children:dateFormater(new Date(item.history.Date))})}),/*#__PURE__*/_jsx(\"td\",{children:dateFormater(new Date(new Date(item.history.Date).setDate(new Date(item.history.Date).getDate()+3)))}),/*#__PURE__*/_jsx(\"td\",{children:\"Otto\"}),/*#__PURE__*/_jsx(\"td\",{children:\"@mdo\"})]});})})]})]});};export default History;","map":{"version":3,"sources":["C:/Users/dimitris.siamplis/Desktop/React-Node/Front-End/src/pages/History.js"],"names":["React","useState","useEffect","Cookies","FontAwesomeIcon","faTrash","dateFormater","addDays","Table","History","history","setHistory","cookies","userEmail","get","getHistory","userDetails","email","fetch","method","body","JSON","stringify","headers","then","res","json","historyArray","key","winesArray","key1","wines","WinesList","includes","_id","push","console","log","length","map","item","wine","WineName","Price","Date","setDate","getDate"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport \"./History.css\";\r\nimport \"./Card.css\";\r\nimport { useState, useEffect } from \"react\";\r\nimport Cookies from \"universal-cookie\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faTrash } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { dateFormater, addDays } from \"./Functions/functions\";\r\nimport { Table } from \"react-bootstrap\";\r\n\r\nconst History = () => {\r\n  const [history, setHistory] = useState([]);\r\n  // const [wines, setWines] = useState([]);\r\n\r\n  const cookies = new Cookies();\r\n  var userEmail = cookies.get(\"email\");\r\n\r\n  const getHistory = () => {\r\n    let userDetails = {\r\n      email: userEmail,\r\n    };\r\n    fetch(\"http://localhost:4000/getHistory\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify(userDetails),\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n    })\r\n      .then((res) => res.json())\r\n      .then((json) => {\r\n        var historyArray = [];\r\n        for (const key in json.history) {\r\n          //   console.log(json.history[key].WinesList);\r\n          var winesArray = [];\r\n          for (const key1 in json.wines) {\r\n            // console.log(json.wines[key1]._id);\r\n\r\n            if (json.history[key].WinesList.includes(json.wines[key1]._id)) {\r\n              winesArray.push(json.wines[key1]);\r\n            }\r\n          }\r\n          historyArray.push({\r\n            history: json.history[key],\r\n            wines: winesArray,\r\n          });\r\n        }\r\n        console.log(historyArray);\r\n        setHistory(historyArray);\r\n      });\r\n  };\r\n  useEffect(() => {\r\n    getHistory();\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      <h3 className=\"HistoryOrderTable\">History Order Table</h3>\r\n      <Table striped bordered hover className=\"tableHistory\">\r\n        <thead>\r\n          <tr>\r\n            <th>Wine Names</th>\r\n            <th>Bootle Price</th>\r\n            <th>Amount</th>\r\n            <th>Total Price</th>\r\n            <th>Order Date</th>\r\n            <th>Shipping Date</th>\r\n            <th>Address</th>\r\n            <th>Payment Kind</th>\r\n            <th>Extra Details</th>\r\n          </tr>\r\n        </thead>\r\n        {history.length !== 0 && (\r\n          <tbody>\r\n            {history.map((item) => (\r\n              <tr>\r\n                <td>\r\n                  {item.wines.map((wine) => (\r\n                    <strong>\r\n                      <a href={`/wine/${wine._id}`}>{wine.WineName}</a>\r\n                      <br />\r\n                    </strong>\r\n                  ))}\r\n                </td>\r\n                <td>\r\n                  {item.wines.map((wine) => (\r\n                    <strong>\r\n                      {wine.Price} €\r\n                      <br />\r\n                    </strong>\r\n                  ))}\r\n                </td>\r\n                <td>Otto</td>\r\n                <td>\r\n                  <strong>{item.history.Price} €</strong>\r\n                </td>\r\n                <td>\r\n                  <strong>{dateFormater(new Date(item.history.Date))}</strong>\r\n                </td>\r\n                <td>\r\n                  {dateFormater(\r\n                    new Date(\r\n                      new Date(item.history.Date).setDate(\r\n                        new Date(item.history.Date).getDate() + 3\r\n                      )\r\n                    )\r\n                  )}\r\n                </td>\r\n                <td>Otto</td>\r\n                <td>@mdo</td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        )}\r\n      </Table>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default History;\r\n"]},"metadata":{},"sourceType":"module"}