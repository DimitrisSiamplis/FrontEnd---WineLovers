{"ast":null,"code":"import _slicedToArray from\"C:/Users/dimitris.siamplis/Desktop/React-Node/Front-End/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from\"react\";import\"./EditProfile.css\";import{useState,useEffect}from\"react\";import Cookies from\"universal-cookie\";import{validateEmail}from\"./Functions/functions\";// import { Container } from \"react-bootstrap\";\nimport{Container,Row,Col}from\"react-bootstrap\";import{GrEdit}from\"react-icons/gr\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EditProfile=function EditProfile(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),newFirstName=_useState4[0],setNewFirstName=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),newLastName=_useState6[0],setNewLastName=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),newEmail=_useState8[0],setNewEmail=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),newMobile=_useState10[0],setNewMobile=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),newAddress=_useState12[0],setNewAddress=_useState12[1];var cookies=new Cookies();var userEmail=cookies.get(\"email\");var getUser=function getUser(email){var emailForSearch=email===undefined?userEmail:email;fetch(\"https://winelovers.herokuapp.com/getUser/\".concat(emailForSearch)).then(function(res){return res.json();}).then(function(json){setUser([json]);console.log([json]);});};useEffect(function(){getUser();},[]);var edit=function edit(firstName,lastName,address,mobile){console.log(firstName,lastName,address,mobile);var userDetails={name:firstName+\" \"+lastName,address:address,mobile:mobile,email:userEmail};fetch(\"http://localhost:4000/editProfile\",{method:\"POST\",body:JSON.stringify(userDetails),headers:{\"Content-Type\":\"application/json\"}}).then(function(res){return res.json();}).then(function(json){console.log(json);setNewFirstName(\"\");setNewLastName(\"\");setNewEmail(\"\");setNewMobile(\"\");getUser();});};var onEditHandler=function onEditHandler(){var firstName=newFirstName===\"\"?user[0].user.Name.split(\" \")[0]:newFirstName.trim();var lastName=newLastName===\"\"?user[0].user.Name.split(\" \")[1]:newLastName.trim();// var email = newEmail === \"\" ? user[0].user.Email : newEmail.trim();\nvar mobile=newMobile===\"\"?user[0].user.Mobile:newMobile.trim();var address=newAddress===\"\"?user[0].user.Address:newAddress.trim();//console.log(firstName, lastName, address, mobile)\nedit(firstName,lastName,address,mobile);};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"title\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"container py-4\",children:[/*#__PURE__*/_jsx(\"header\",{className:\"pb-3 mb-4 border-bottom\",children:/*#__PURE__*/_jsx(\"a\",{className:\"d-flex align-items-center text-dark text-decoration-none\",children:/*#__PURE__*/_jsx(\"span\",{className:\"fs-4\",children:\"WineLovers Website\"})})}),\" \"]}),user.length!==0&&/*#__PURE__*/_jsx(\"div\",{className:\"mainDiv\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"cardStyle\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"formTitle\",children:[/*#__PURE__*/_jsx(GrEdit,{}),\" Edit Profile\"]}),/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{xs:6,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"inputDiv\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"inputLabel\",children:\"First Name\"}),/*#__PURE__*/_jsx(\"input\",{value:newFirstName,type:\"text\",id:\"editText\",placeholder:user[0].user.Name.split(\" \")[0],onChange:function onChange(e){setNewFirstName(e.target.value);}})]}),newFirstName!==\"\"&&newFirstName.length<5&&/*#__PURE__*/_jsxs(\"p\",{className:\"alertMessage\",children:[\" \",\"\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\",/*#__PURE__*/_jsx(\"strong\",{children:\"Min 5 characters.\"}),\" \"]})]}),\" \",/*#__PURE__*/_jsx(Col,{xs:6,children:/*#__PURE__*/_jsx(\"div\",{className:\"buttonWrapper\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",id:\"submitButton\",disabled:newFirstName!==\"\"&&newFirstName.length<5||newFirstName===\"\",onClick:onEditHandler,className:\"submitButton pure-button pure-button-primary\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Edit First Name\"})})})})]}),\" \",/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{xs:6,children:[\" \",/*#__PURE__*/_jsxs(\"div\",{className:\"inputDiv\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"inputLabel\",children:\"Last Name\"}),/*#__PURE__*/_jsx(\"input\",{value:newLastName,type:\"text\",id:\"editText\",placeholder:user[0].user.Name.split(\" \")[1],onChange:function onChange(e){setNewLastName(e.target.value);}})]}),newLastName!==\"\"&&newLastName.length<5&&/*#__PURE__*/_jsxs(\"p\",{className:\"alertMessage\",children:[\" \",\"\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\",/*#__PURE__*/_jsx(\"strong\",{children:\"Min 5 characters.\"}),\" \"]})]}),/*#__PURE__*/_jsx(Col,{xs:6,children:/*#__PURE__*/_jsx(\"div\",{className:\"buttonWrapper\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",id:\"submitButton\",disabled:newLastName!==\"\"&&newLastName.length<5||newLastName===\"\",onClick:onEditHandler,className:\"submitButton pure-button pure-button-primary\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Edit Last Name\"})})})})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{xs:6,children:/*#__PURE__*/_jsxs(\"div\",{className:\"inputDiv\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"inputLabel\",children:\"Address\"}),/*#__PURE__*/_jsx(\"input\",{value:newAddress,type:\"text\",id:\"editText\",placeholder:user[0].user.Address,onChange:function onChange(e){setNewAddress(e.target.value);}})]})}),/*#__PURE__*/_jsx(Col,{xs:6,children:/*#__PURE__*/_jsx(\"div\",{className:\"buttonWrapper\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",id:\"submitButton\",disabled:newEmail!==\"\"&&newEmail.length<5||newEmail===\"\"||!validateEmail(newEmail),onClick:onEditHandler,className:\"submitButton pure-button pure-button-primary\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Edit Email\"})})})})]}),\" \",/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{xs:6,children:[\" \",/*#__PURE__*/_jsxs(\"div\",{className:\"inputDiv\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"inputLabel\",children:\"Mobile\"}),/*#__PURE__*/_jsx(\"input\",{value:newMobile,type:\"text\",id:\"editText\",placeholder:user[0].user.Mobile,onChange:function onChange(e){setNewMobile(e.target.value);}})]})]}),/*#__PURE__*/_jsx(Col,{xs:6,children:/*#__PURE__*/_jsx(\"div\",{className:\"buttonWrapper\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",id:\"submitButton\",disabled:newMobile!==\"\"&&(newMobile.length<10||newMobile.length>10)||newMobile===\"\"||newMobile[0]!==\"6\"||newMobile[1]!==\"9\"||isNaN(newMobile),onClick:onEditHandler,className:\"submitButton pure-button pure-button-primary\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Edit Mobile\"})})})})]}),/*#__PURE__*/_jsx(\"hr\",{})]})]})})]})});};export default EditProfile;","map":{"version":3,"sources":["C:/Users/dimitris.siamplis/Desktop/React-Node/Front-End/src/pages/EditProfile.js"],"names":["React","useState","useEffect","Cookies","validateEmail","Container","Row","Col","GrEdit","EditProfile","user","setUser","newFirstName","setNewFirstName","newLastName","setNewLastName","newEmail","setNewEmail","newMobile","setNewMobile","newAddress","setNewAddress","cookies","userEmail","get","getUser","email","emailForSearch","undefined","fetch","then","res","json","console","log","edit","firstName","lastName","address","mobile","userDetails","name","method","body","JSON","stringify","headers","onEditHandler","Name","split","trim","Mobile","Address","length","e","target","value","isNaN"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport \"./EditProfile.css\";\r\nimport { useState, useEffect } from \"react\";\r\nimport Cookies from \"universal-cookie\";\r\nimport { validateEmail } from \"./Functions/functions\";\r\n// import { Container } from \"react-bootstrap\";\r\nimport { Container, Row, Col } from \"react-bootstrap\";\r\nimport { GrEdit } from \"react-icons/gr\";\r\n\r\nconst EditProfile = () => {\r\n  const [user, setUser] = useState([]);\r\n  const [newFirstName, setNewFirstName] = useState(\"\");\r\n  const [newLastName, setNewLastName] = useState(\"\");\r\n  const [newEmail, setNewEmail] = useState(\"\");\r\n  const [newMobile, setNewMobile] = useState(\"\");\r\n  const [newAddress, setNewAddress] = useState(\"\");\r\n\r\n  const cookies = new Cookies();\r\n  var userEmail = cookies.get(\"email\");\r\n\r\n  const getUser = (email) => {\r\n    var emailForSearch = email === undefined ? userEmail : email;\r\n    fetch(`https://winelovers.herokuapp.com/getUser/${emailForSearch}`)\r\n      .then((res) => res.json())\r\n      .then((json) => {\r\n        setUser([json]);\r\n        console.log([json]);\r\n      });\r\n  };\r\n\r\n  useEffect(() => {\r\n    getUser();\r\n  }, []);\r\n\r\n  const edit = (firstName, lastName, address, mobile) => {\r\n    console.log(firstName, lastName, address, mobile);\r\n    let userDetails = {\r\n      name: firstName + \" \" + lastName,\r\n      address: address,\r\n      mobile: mobile,\r\n      email: userEmail,\r\n    };\r\n    fetch(\"http://localhost:4000/editProfile\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify(userDetails),\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n    })\r\n      .then((res) => res.json())\r\n      .then((json) => {\r\n        console.log(json);\r\n        setNewFirstName(\"\");\r\n        setNewLastName(\"\");\r\n        setNewEmail(\"\");\r\n        setNewMobile(\"\");\r\n        getUser();\r\n      });\r\n  };\r\n\r\n  const onEditHandler = () => {\r\n    var firstName =\r\n      newFirstName === \"\"\r\n        ? user[0].user.Name.split(\" \")[0]\r\n        : newFirstName.trim();\r\n    var lastName =\r\n      newLastName === \"\" ? user[0].user.Name.split(\" \")[1] : newLastName.trim();\r\n    // var email = newEmail === \"\" ? user[0].user.Email : newEmail.trim();\r\n    var mobile = newMobile === \"\" ? user[0].user.Mobile : newMobile.trim();\r\n    var address = newAddress === \"\" ? user[0].user.Address : newAddress.trim();\r\n    //console.log(firstName, lastName, address, mobile)\r\n    edit(firstName, lastName, address, mobile);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"title\">\r\n        <div className=\"container py-4\">\r\n          <header className=\"pb-3 mb-4 border-bottom\">\r\n            <a className=\"d-flex align-items-center text-dark text-decoration-none\">\r\n              <span className=\"fs-4\">WineLovers Website</span>\r\n            </a>\r\n          </header>{\" \"}\r\n        </div>\r\n        {user.length !== 0 && (\r\n          <div className=\"mainDiv\">\r\n            <div className=\"cardStyle\">\r\n              <h2 className=\"formTitle\">\r\n                <GrEdit /> Edit Profile\r\n              </h2>\r\n\r\n              <Container>\r\n                <Row>\r\n                  <Col xs={6}>\r\n                    <div className=\"inputDiv\">\r\n                      <label className=\"inputLabel\">First Name</label>\r\n                      <input\r\n                        value={newFirstName}\r\n                        type=\"text\"\r\n                        id=\"editText\"\r\n                        placeholder={user[0].user.Name.split(\" \")[0]}\r\n                        onChange={(e) => {\r\n                          setNewFirstName(e.target.value);\r\n                        }}\r\n                      />\r\n                    </div>\r\n                    {newFirstName !== \"\" && newFirstName.length < 5 && (\r\n                      <p className=\"alertMessage\">\r\n                        {\" \"}\r\n                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n                        <strong>Min 5 characters.</strong>{\" \"}\r\n                      </p>\r\n                    )}\r\n                  </Col>{\" \"}\r\n                  <Col xs={6}>\r\n                    <div className=\"buttonWrapper\">\r\n                      <button\r\n                        type=\"submit\"\r\n                        id=\"submitButton\"\r\n                        disabled={\r\n                          (newFirstName !== \"\" && newFirstName.length < 5) ||\r\n                          newFirstName === \"\"\r\n                        }\r\n                        onClick={onEditHandler}\r\n                        className=\"submitButton pure-button pure-button-primary\"\r\n                      >\r\n                        <span>Edit First Name</span>\r\n                      </button>\r\n                    </div>\r\n                  </Col>\r\n                </Row>{\" \"}\r\n                <hr />\r\n                <Row>\r\n                  <Col xs={6}>\r\n                    {\" \"}\r\n                    <div className=\"inputDiv\">\r\n                      <label className=\"inputLabel\">Last Name</label>\r\n                      <input\r\n                        value={newLastName}\r\n                        type=\"text\"\r\n                        id=\"editText\"\r\n                        placeholder={user[0].user.Name.split(\" \")[1]}\r\n                        onChange={(e) => {\r\n                          setNewLastName(e.target.value);\r\n                        }}\r\n                      />\r\n                    </div>\r\n                    {newLastName !== \"\" && newLastName.length < 5 && (\r\n                      <p className=\"alertMessage\">\r\n                        {\" \"}\r\n                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n                        <strong>Min 5 characters.</strong>{\" \"}\r\n                      </p>\r\n                    )}\r\n                  </Col>\r\n                  <Col xs={6}>\r\n                    <div className=\"buttonWrapper\">\r\n                      <button\r\n                        type=\"submit\"\r\n                        id=\"submitButton\"\r\n                        disabled={\r\n                          (newLastName !== \"\" && newLastName.length < 5) ||\r\n                          newLastName === \"\"\r\n                        }\r\n                        onClick={onEditHandler}\r\n                        className=\"submitButton pure-button pure-button-primary\"\r\n                      >\r\n                        <span>Edit Last Name</span>\r\n                      </button>\r\n                    </div>\r\n                  </Col>\r\n                </Row>\r\n                <hr />\r\n                <Row>\r\n                  <Col xs={6}>\r\n                    <div className=\"inputDiv\">\r\n                      <label className=\"inputLabel\">Address</label>\r\n                      <input\r\n                        value={newAddress}\r\n                        type=\"text\"\r\n                        id=\"editText\"\r\n                        placeholder={user[0].user.Address}\r\n                        onChange={(e) => {\r\n                          setNewAddress(e.target.value);\r\n                        }}\r\n                      />\r\n                    </div>\r\n                    {/* {newAddress !== \"\"  && (\r\n                    <p className=\"alertMessage\">\r\n                      {\" \"}\r\n                      Email must iclude '@'' and '.'{\" \"}\r\n                    </p>\r\n                  )} */}\r\n                  </Col>\r\n                  <Col xs={6}>\r\n                    <div className=\"buttonWrapper\">\r\n                      <button\r\n                        type=\"submit\"\r\n                        id=\"submitButton\"\r\n                        disabled={\r\n                          (newEmail !== \"\" && newEmail.length < 5) ||\r\n                          newEmail === \"\" ||\r\n                          !validateEmail(newEmail)\r\n                        }\r\n                        onClick={onEditHandler}\r\n                        className=\"submitButton pure-button pure-button-primary\"\r\n                      >\r\n                        <span>Edit Email</span>\r\n                      </button>\r\n                    </div>\r\n                  </Col>\r\n                </Row>{\" \"}\r\n                <hr />\r\n                <Row>\r\n                  <Col xs={6}>\r\n                    {\" \"}\r\n                    <div className=\"inputDiv\">\r\n                      <label className=\"inputLabel\">Mobile</label>\r\n                      <input\r\n                        value={newMobile}\r\n                        type=\"text\"\r\n                        id=\"editText\"\r\n                        placeholder={user[0].user.Mobile}\r\n                        onChange={(e) => {\r\n                          setNewMobile(e.target.value);\r\n                        }}\r\n                      />\r\n                    </div>\r\n                  </Col>\r\n                  <Col xs={6}>\r\n                    <div className=\"buttonWrapper\">\r\n                      <button\r\n                        type=\"submit\"\r\n                        id=\"submitButton\"\r\n                        disabled={\r\n                          (newMobile !== \"\" &&\r\n                            (newMobile.length < 10 || newMobile.length > 10)) ||\r\n                          newMobile === \"\" ||\r\n                          newMobile[0] !== \"6\" ||\r\n                          newMobile[1] !== \"9\" ||\r\n                          isNaN(newMobile)\r\n                        }\r\n                        onClick={onEditHandler}\r\n                        className=\"submitButton pure-button pure-button-primary\"\r\n                      >\r\n                        <span>Edit Mobile</span>\r\n                      </button>\r\n                    </div>\r\n                  </Col>\r\n                </Row>\r\n                <hr />\r\n              </Container>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EditProfile;\r\n"]},"metadata":{},"sourceType":"module"}